<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Ion Engine: Collision events</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Ion Engine 1.0.0</a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Collision events<div class="ingroups"><a class="el" href="../../db/d9e/group___i_o_n-_a_p_i.html">Ion Engine API</a> &raquo; <a class="el" href="../../dc/deb/group___g_a_m_e_o_b_j_e_c_t.html">GameObject</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Callbacks and set up for classes derived from <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a>.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Collision events:</div>
<div class="dyncontent">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d0e/group___c_o_l_l_i_s_i_o_n-_e_v_e_n_t_s.svg" width="266" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/deb/class_collidable.html">Collidable</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual derived class of <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> that allows the <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> to test for collison.  <a href="../../d8/deb/class_collidable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d7c/class_collision_volume.html">CollisionVolume</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An abstract base class for collision test type volumes.  <a href="../../d5/d7c/class_collision_volume.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0a/class_collision_volume_a_a_b_b.html">CollisionVolumeAABB</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> type for AABB volumes.  <a href="../../d0/d0a/class_collision_volume_a_a_b_b.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d21/class_collision_volume_b_sphere.html">CollisionVolumeBSphere</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> type for BSphere volumes.  <a href="../../d8/d21/class_collision_volume_b_sphere.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/ded/class_collision_volume_o_b_b.html">CollisionVolumeOBB</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> type for OBB volumes.  <a href="../../d6/ded/class_collision_volume_o_b_b.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Callbacks and set up for classes derived from <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a>. </p>
<p><a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> GameObjects allow the user to register and test collision between multiple GameObjects.</p>
<p>Registering <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> GameObjects happens in the <a class="el" href="../../d6/db5/class_scene.html" title="The space in which gameobjects exist. ">Scene</a> class. By using the SetCollisionSelf&lt;&gt;() and SetCollisionPair&lt;&gt;() functions, the user can register pairs of <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> GameObjects that should be tested against each other for collision. More information can be found here: <a class="el" href="../../df/d02/group___s_c_e_n_e.html">Scene</a></p>
<p>When two <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> GameObjects are tested for collision and are found to be colliding, the virtual <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> functions within the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> GameObjects are called. This means that the user needs to override the <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function in order to write the code that executes on collision.</p>
<dl class="section note"><dt>Note</dt><dd><b>IMPORTANT:</b> The user will need to override the <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function one time for every <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> that should be tested for collision. The original <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function takes in a <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> pointer as a parameter. This will also need to be overriden by the user (and in most cases, can be left empty). This original function is what will be called by default if the specific <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function is not specified.</dd></dl>
<p>Like other GameObjects, Collidables will need to be registered before collisions can be checked; they can also be deregistered to prevent collision checking while the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> is still alive. This is done through the CollisionRegister&lt;&gt;() and CollisionDeregister&lt;&gt;() functions.</p>
<p>For example, lets assume we have a bullet class. The bullet should be able to collide with a 'Tank' <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> and destroy itself upon collision.</p>
<p>Bullet.h: </p><div class="fragment"><div class="line"><span class="keyword">class </span>Bullet : <span class="keyword">public</span> <a class="code" href="../../d7/d69/class_updatable.html">Updatable</a>, <span class="keyword">public</span> <a class="code" href="../../d2/de4/class_drawable.html">Drawable</a>, <span class="keyword">public</span> <a class="code" href="../../d7/db6/class_alarmable.html">Alarmable</a>, <span class="keyword">public</span> <a class="code" href="../../d8/deb/class_collidable.html">Collidable</a></div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0">Collision</a>(<a class="code" href="../../d8/deb/class_collidable.html">Collidable</a>*);</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0">Collision</a>(Tank*);</div><div class="line">    ...</div><div class="line">};</div></div><!-- fragment --><p>Bullet.cpp: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> Bullet::Collision(<a class="code" href="../../d8/deb/class_collidable.html">Collidable</a> *)</div><div class="line">{</div><div class="line">    <span class="comment">//default collision triggered</span></div><div class="line">    ...</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">void Bullet::Collision(Tank *)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="comment">//collided with a Tank GameObject, destroy itself</span></div><div class="line">    SubmitExit();</div><div class="line">    ...</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">void Bullet::Update()</div><div class="line">{</div><div class="line">    <span class="comment">//calculate the new position and world matrix</span></div><div class="line">    ...</div><div class="line">    <span class="comment">//Update collision data with current position</span></div><div class="line">    this-&gt;UpdateCollisionData(world);</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">void Bullet::SceneEntry()</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="comment">//Register for Collision</span></div><div class="line">    CollisionRegister&lt;Bullet&gt;(<span class="keyword">this</span>);</div><div class="line">    SetColliderModel(pGObj_WireFrame_Ball-&gt;getModel(), VolumeType::OBB);</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">void Bullet::SceneExit()</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="comment">//Deregister for Collision</span></div><div class="line">    CollisionDeregister&lt;Bullet&gt;(<span class="keyword">this</span>);</div><div class="line">    ...</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">void Bullet::CollisionTerrain()</div><div class="line">{</div><div class="line">    bSphereToggle = <span class="keyword">true</span>;</div><div class="line">    SubmitExit();</div><div class="line">}</div></div><!-- fragment --><p>UserScene.cpp: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> UserScene::Initialize()</div><div class="line">{</div><div class="line">    ...</div><div class="line"></div><div class="line">    SetCollisionPair&lt;Tank, Bullet&gt;();</div><div class="line">    SetCollisionSelf&lt;Bullet&gt;();</div><div class="line">    SetCollisionTerrain&lt;Bullet&gt;();</div><div class="line">}</div></div><!-- fragment --><p> First, in the header file, the bullet class derives from the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> class and overrides the <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function for <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision(Collidable*)</a>. The class can then also specify more <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> overrides such as Collidable::Collision(Tank*).</p>
<p>Next, in the .cpp, the bullet regisisters itself for collision in the <a class="el" href="../../d0/dd1/class_game_object.html#ab1e9ca16a81fcb31a1e198669d0a74c0" title="Function which is called upon a registered scene entry. ">GameObject::SceneEntry()</a> with the the <a class="el" href="../../d8/deb/class_collidable.html#aaa27862556f56973374c8cac38417450" title="Function to register this Collidable GameObject for collision. ">Collidable::CollisionRegister&lt;T&gt;()</a> function. It then sets its collision model by using the function <a class="el" href="../../d8/deb/class_collidable.html#a5a2590b6c21360e4d3f81f1652260244" title="Function to set the Collider Model and Collision Volume of this Collidable GameObject. ">Collidable::SetColliderModel</a>(pGObj_WireFrame_Ball-&gt;getModel(), VolumeType::OBB). This passes a reference of the current model to the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> to be used for collision calculations. The <a class="el" href="../../d8/deb/class_collidable.html#a5a2590b6c21360e4d3f81f1652260244" title="Function to set the Collider Model and Collision Volume of this Collidable GameObject. ">Collidable::SetColliderModel()</a> function also sets the VolumeType of the <a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> to use. This normally defualts to VolumeType::BSPHERE which sets the <a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> to a CollisionVolumeBsphere.</p>
<p>In the <a class="el" href="../../d7/d69/class_updatable.html#a4bed06c6110e7a2fcb71c66cc30fa55e" title="Function which is called every update frame. ">Updatable::Update()</a> of the bullet, the function this-&gt;UpdateCollisionData(world) is called to pass the new world matrix to the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> to be used for collision calculations.</p>
<p>When the bullet actually collides with an object, the <a class="el" href="../../d8/deb/class_collidable.html#a82f6a45d2f3b30c69e65c030e80eaad0" title="Function that is called when collision with another Collidable GameObject is triggered. ">Collidable::Collision()</a> function will be called. As you can see, the defualt Collision(Collidable*) function is left empty (unless there is a desire to put something in it). In the Collision(Tank*) function, the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> calls <a class="el" href="../../d0/dd1/class_game_object.html#ab13c929c99c3074d4a0467ce02cd7998" title="Public Function to register a call for the GameObject&#39;s SceneEntry() function. ">GameObject::SubmitExit()</a> in order to destroy itself upon collision with a Tank <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a>.</p>
<p>In the <a class="el" href="../../d0/dd1/class_game_object.html#afb3c061ffd79d7b18ad64a543b91d5c9" title="Function which is called upon a registered scene exit. ">GameObject::SceneExit()</a> the <a class="el" href="../../d8/deb/class_collidable.html" title="A virtual derived class of GameObject that allows the GameObject to test for collison. ">Collidable</a> <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> deregisters itself with the CollisionDeregister&lt;T&gt;() function. This prevents the bullet from triggering any collision while it is recycled in the BulletFactory.</p>
<p>Within the UserScene, the <a class="el" href="../../d6/db5/class_scene.html#a7257d595b38462d1764a6c4e260b47f7" title="Registers two Collidable class types to test for collision. ">Scene::SetCollisionPair&lt;T,T&gt;()</a> function is used to register 'Tank' and 'Bullet' as a pair to be tested for collision. The <a class="el" href="../../d6/db5/class_scene.html#af198d5dc3e3a472f32ef71100517323b" title="Registers Collidable class type to test for collision with itself. ">Scene::SetCollisionSelf&lt;T&gt;()</a> function is also used to register 'Bullet' to test collision with other bullet objects. This means that every frame registered GameObjects will test if they are currently colliding through a tiered collision system. The <a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> specified when using the <a class="el" href="../../d8/deb/class_collidable.html#a5a2590b6c21360e4d3f81f1652260244" title="Function to set the Collider Model and Collision Volume of this Collidable GameObject. ">Collidable::SetColliderModel()</a> function determines what kind of <a class="el" href="../../d5/d7c/class_collision_volume.html" title="An abstract base class for collision test type volumes. ">CollisionVolume</a> to use on the final test: BSphere, AABB, or OBB.</p>
<p>Collidables can also be paired to test collision on the current scene's terrain. This can be done through the SetCollisionTerrain&lt;T&gt;() function in the UserScene as long as the collidable is already registered as a collidable (<a class="el" href="../../d8/deb/class_collidable.html#aaa27862556f56973374c8cac38417450" title="Function to register this Collidable GameObject for collision. ">Collidable::CollisionRegister&lt;T&gt;()</a>). When the <a class="el" href="../../d0/dd1/class_game_object.html" title="Base class that all game entities derive from. ">GameObject</a> collides with the terrain, the <a class="el" href="../../d8/deb/class_collidable.html#a8b0c683418e40e7410494bd04f9423c6" title="Function that is called when collision with Terrain is triggered. ">Collidable::CollisionTerrain()</a> is triggered. In this case the Bullet calls <a class="el" href="../../d0/dd1/class_game_object.html#afb3c061ffd79d7b18ad64a543b91d5c9" title="Function which is called upon a registered scene exit. ">GameObject::SceneExit()</a> to deregister and destroy itself when colliding with terrain. </p>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
